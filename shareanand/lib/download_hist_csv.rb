require 'open-uri'
require 'fileutils'

#script_list=ScriptMetaDatum.uniq.pluck(:nse_script_name)  #array
fil=File.open('/home/sradhu/Yahoo_finance_hist/log_yahoo_fin_hist.txt',"a")
#script_list= ["INFY","IOB","ITC"] #,"MCDOWELL-N", ""]
#
#script_list = File.foreach('/home/sradhu/Yahoo_finance_hist/log_yahoo_fin_hist_array.txt')
#fil.puts script_list.class

script_list = ['EDELWEISS','GENUSPOWER','TATAINVEST','NATNLSTEEL','KAKATCEM','ESSAROIL','JSL','BILENERGY','EXCEL','ICNX100','PHOENIXLTD','SUBROS','BFUTILITIE','TFCILTD','RELCONS','SIMPLEX','HITACHIHOM','WABAG','PARACABLES','COROMANDEL','ASHIANA','UTTAMSTL','IVP','RKFORGE','HBLPOWER','NAHARINDUS','NIBL','NITESHEST','IOLCP','EUROTEXIND','KABRAEXTRU','DAAWAT','HESTERBIO','GLOBALVECT','CANDC','LYPSAGEMS','ZUARI','GEOJITBNPP','PIIND','HINDZINC','GRASIM','AHLUCONT','TALWALKARS','JAGRAN','SURANASOL','SMSPHARMA','ECLERX','PARASPETRO','PIONEEREMB','BALPHARMA','GIPCL','SIEMENS','CAPLIPOINT','UCOBANK','PHILIPCARB','8KMILES','CHEMFALKAL','TFL','JINDCOT','CERA','GILLANDERS','GEECEE','APLAPOLLO','CENTENKA','LOVABLE','TODAYS','HIRECT','MUKANDLTD','HOTELRUGBY','OUDHSUG','ESSDEE','PGEL','VSTIND','VINDHYATEL','JMTAUTOLTD','MANINFRA','INFRABEES','ARVIND','BALKRISIND','BIRLACORPN','LT','GATI','BANCOINDIA','PRICOL','EUROMULTI','GLOBUSSPR','LUPIN','SWARAJENG','GTOFFSHORE','ZENITHBIR','HOCL','MANUGRAPH','AMBIKCO','TRIGYN','KOTHARIPRO','AUROPHARMA','WANBURY','SAIL','THEMISMED','UNITEDBNK','AMTEKAUTO','TATASTEEL','AMARAJABAT','GREAVESCOT','FDC','BIL','BIOCON','DIGJAM','BHUSANSTL','VHL','UPL','CYBERTECH','ADFFOODS','JBMA','DPL','RMCL','BBTC','ULTRACEMCO','RELDIVOPP','MOSERBAER','SUNDRMFAST','DEEPAKFERT','KIRLOSENG','BASML','MRO-TEK','KMSUGAR','HIL','HINDCOPPER','FARMAXIND','TIIL','SHIVAMAUTO','MIRZAINT','PIDILITIND','ORIENTPPR','GITANJALI','LITL','SREEL','IDFC','PCJEWELLER','SHANTIGEAR','FLEXITUFF','PANAMAPET','MANGALAM','SUNTV','SHRENUJ','BGLOBAL','SESHAPAPER','SANGHVIFOR','NILAINFRA','NDL','USHAMART','AUSOMENT','PENIND','SYNCOM','DRREDDY','IFBAGRO','THANGAMAYL','SUJANATWR','MAWANASUG','SSWL','DLINKINDIA','BIRLAERIC','SELAN','TNPL','GOLDTECH','BEML','UNIPLY','SARDAEN','NATHBIOGEN','SEAMECLTD','AJANTPHARM','BGRENERGY','NATCOPHARM','BANKBARODA','CLASSIC','MOREPENLAB','CTE','GREENFIRE','SANGHVIMOV','BAJAJELEC','INDIANCARD','MTNL','VKSPL','SPARC','SPICEMOBI','TECPRO','SHRIASTER','BHARATRAS','JKLAKSHMI','JVLAGRO','MOTILALOFS','JIKIND','BAYERCROP','PFIZER','AXISCADES','UCALFUEL','SURANAIND','SYNDIBANK','EICHERMOT','KOLTEPATIL','INSECTICID','SUPPETRO','MANINDS','SADBHAV','SFCL','CEATLTD','TARAJEWELS','MCX','SOMATEX','HITECHGEAR','SELMCL','RELINFRA','AARTIDRUGS','NITINSPIN','ATULAUTO','JMA','WIPRO','ORIENTHOT','ICSA','PHOENIXLL','MRPL','ABGSHIP','HANUNG','CASTROLIND','MADRASFERT','GSPL','IMPAL','CORPBANK','PTC','RAMCOIND','LYKALABS','BPL','SYMPHONY','RANEENGINE','EIDPARRY','EXCELCROP','SUJANAUNI','TEXINFRA','BATAINDIA','NAHARCAP','SHILPAMED','TI','SONASTEER','INDIACEM','GKWLIMITED','RUCHIRA','KSBPUMPS','RPGLIFE','JSWSTEEL','TATAMOTORS','BHARATFORG','NUCLEUS','CREST','LOKESHMACH','STYABS','MAXWELL','RAJSREESUG','PENINLAND','DSSL','PPAP','RANASUG','J&KBANK','MAHABANK','REPRO','VISAKAIND','MIRCELECTR','WEBELSOLAR','GODREJPROP','XPROINDIA','GULFCORP','SIL','WINSOME','RELCAPITAL','JUSTDIAL','GILLETTE','RPOWER','BEPL','TIRUMALCHM','NUTEK','ACC','INDOTECH','HINDUJAFO','QUINTEGRA','JAGSNPHARM','KNRCON','GRPLTD','VLSFINANCE','ELAND','SUNDARMFIN','VOLTAMP','IZMO','KCP','GOENKA','GSKCONS','CYIENT','MANAKALUCO','TAKE','RAMCOCEM','PATELENG','AHLWEST','JAYBARMARU','MERCK','IRB','BSLIMITED','CELESTIAL','TATASPONGE','VMART','FEDDERLOYD','PREMIERPOL','SIMBHSUGAR','VAIBHAVGBL','STARPAPER','EMAMILTD','GREENPOWER','SHARONBIO','PANORAMUNI','GALLANTT','JISLJALEQS','PETRONENGG','VRLLOG','GUJALKALI','OMNITECH','IPAPPM','GAYAPROJ','WEIZFOREX','BLUESTINFO','GARWALLROP','MAANALU','BYKE','TIDEWATER','FEDERALBNK','SUMMITSEC','TUBEINVEST','DPSCLTD','BSL','IITL','AGRITECH','ANSALHSG','GREENPLY','PERSISTENT','ALKYLAMINE','NAHARSPING','RAMCOSYS','MEP','SRF','VALECHAENG','BALLARPUR','PTL','ORIENTLTD','NAHARPOLY','ANGIND','CUB','ORCHIDCHEM','TOKYOPLAST','NGCT','SUNFLAG','GOLDBEES','REFEX','MEGH','AMRUTANJAN','INDORAMA','LGBFORGE','RUCHINFRA','HDIL','GUJAPOLLO','MANAKSIA','BERGEPAINT','HINDPETRO','IMFA','HINDSYNTEX','LINCPEN','VEDL','BLUESTARCO','VISASTEEL','CCHHL','HEIDELBERG','SUPRAJIT','FMNL','SHREYAS','CAREERP','SDBL','KTIL','UNIVCABLES','PUNJLLOYD','WELINV','TVSELECT','TATACOMM','EXIDEIND','ALBK','CHROMATIC','KANSAINER','VARDHACRLC','MUNJALSHOW','TVSMOTOR','FINCABLES','NAVNETEDUL','NAKODA','ASAL','LAKSHMIEFL','CENTRALBK','WABCOINDIA','GOLDENTOBC','PRISMCEM','GRINDWELL','ALCHEM','BLUECHIP','ELGIRUBCO','PGHH','AIL','GUJFLUORO','BAJAJHLDNG','GUJNREDVR','AARVEEDEN','OILCOUNTUB','PREMIER','MSPL','HCIL','TECHNO','TTML','JAYNECOIND','PSL','FACT','FORTIS','HILTON','JMCPROJECT','ACCELYA','ASTEC','STERLINBIO','ONMOBILE','AXISGOLD','HERCULES','KECL','IGL','ZENSARTECH','IGOLD','COLPAL','JINDALPHOT','ARSSINFRA','CALSOFT','VIMALOIL','SHREERAMA','VTL','PATINTLOG','ALEMBICLTD','INDSWFTLTD','GAMMONIND','LAMBODHARA','PFS','INOXWIND','TIMETECHNO','GOLDINFRA','DTIL','ESSARPORTS','PANACEABIO','TCIDEVELOP','FRL','ITI','SOTL','ALPA','EMMBI','PRADIP','EMCO','VIMTALABS','FMGOETZE','WHIRLPOOL','DENABANK','ADHUNIK','ROHITFERRO','JINDALSTEL','MADHAV','BUTTERFLY','RJL','SMPL','IFGLREFRAC','ELECTHERM','SOBHA','FLFL','TIMKEN','IIFLNIFTY','MUNJALAU','GINNIFILA','VSSL','PARABDRUGS','20MICRONS','SALSTEEL','DALMIABHA','COSMOFILMS','GHCL','MAHSEAMLES','AKSHOPTFBR','SOMANYCERA','TECHNOFAB','APLLTD','INDTERRAIN','IIFL','GLOBOFFS','ALSTOMT&D','NICCO','LGBBROSLTD','JPASSOCIAT','GULFPETRO','NSIL','SUNDARAM','SURANACORP','JMFINANCIL','MANALIPETC','LINDEINDIA','PRAKASHCON','ARCOTECH','MURUDCERA','HONAUT','SITASHREE','MAHSCOOTER','BINANIIND','DHFL','PARRYSUGAR','RECLTD','NBVENTURES','RAJRAYON','BINDALAGRO','ASHOKA','MERCATOR','BAJAJHIND','COUNCODOS','HDFCBANK','OMAXAUTO','SUVEN','GAEL','TATAPOWER','SICAGEN','HEROMOTOCO','SPIC','VINYLINDIA','NOIDATOLL','SPECIALITY','KOTHARIPET','ESABINDIA','DCM','VOLTAS','AUTOIND','SBIGETS','KANANIIND','ENERGYDEV','JAIBALAJI','ASAHISONG','FCEL','ZEELEARN','MAHLIFE','KARMAENG','KEI','UFLEX','CIGNITITEC','SWANENERGY','BAJFINANCE','BRFL','HEXAWARE','GULPOLY','HCL-INSYS','NIITLTD','TRIL','METKORE','WSTCSTPAPR','KILITCH','ASTRAMICRO','FCL','STEL','APTECHT','GDL','MASTEK','MURLIIND','DHAMPURSUG','ALLSEC','CARERATING','TTL','CENTURYPLY','ISFT','BAJAJ-AUTO','DCMSHRIRAM','HEXATRADEX','RIIL','FILATEX','SUNPHARMA','DSKULKARNI','SUDARSCHEM','JKIL','INFOMEDIA','RCOM','SPENTEX','LUMAXTECH','VIKASGLOB','TULSI','IL&FSENGG','NEYVELILIG','HOVS','TEXMOPIPES','MADHUCON','INDOSOLAR','RTNPOWER','DIVISLAB','ARIES','JYOTHYLAB','EIMCOELECO','GESHIP','DECCANCE','ORIENTCEM','GOODLUCK','PAEL','TANTIACONS','XLENERGY','PDUMJEPULP','ANSALAPI','GSFC','OBEROIRLTY','SAMBHAAV','SAKHTISUG','ABAN','TIL','DBREALTY','IFCI','KSL','DYNATECH','BOSCHLTD','ROLTA','ERAINFRA','BIRLACOT','GPIL','PRAJIND','SHILPI','BILPOWER','SRIPIPES','GANDHITUBE','GTLINFRA','RBL','SAKSOFT','GAIL','HMT','HEG','SUPREMETEX','TAINWALCHM','HCC','MCDHOLDING','M&MFIN','ASIANHOTNR','SCHNEIDER','MEGASOFT','NAVINFLUOR','LYCOS','NOESISIND','CRMFGETF','CRISIL','MMFL','RSYSTEMS','UNIENTER','AFL','SKIPPER','ABBOTINDIA','ABCIL','VIJSHAN','CLNINDIA','ASTRAZEN','SIMPLEXINF','BURNPUR','TRIVENI','EON','ENTEGRA','KTKBANK','SKIL','SURANAT&P','OMMETALS','GABRIEL','MBECL','BPCL','KPRMILL','GODREJIND','ANTGRAPHIC','DISHTV','NAGREEKCAP','LAOPALA','VIVIMEDLAB','V2RETAIL','HIMATSEIDE','AXISBANK','ANANTRAJ','RAJOIL','HOTELEELA','HDFCMFGETF','PROVOGE','TPLPLASTEH','PIPAVAVDOC','SUPERSPIN','DREDGECORP','NEULANDLAB','BANSWRAS','AIAENG','VINATIORGA','KOPRAN','PNCINFRA','TWL','EIHAHOTELS','MINDACORP','ALMONDZ','ACE','WELCORP','SKFINDIA','GEMINI','MANDHANA','GANECOS','OMAXE','PURVA','GENUSPAPER','SPLIL','NETWORK18','MALWACOTT','RPPINFRA','INDLMETER','EIHOTEL','BEL','SGJHL','SREINFRA','TARAPUR','GODFRYPHLP','IFBIND','ARIHANT','VISUINTL','BSLGOLDETF','INDNIPPON','GTNTEX','ONWARDTEC','CADILAHC','LLOYDELENG','OFSS','SANOFI','KPIT','VSTTILLERS','FCSSOFT','OPTOCIRCUI','LPDC','KEC','UBL','TINPLATE','BALMLAWRIE','TRITURBINE','NAGAROIL','PFRL','KALINDEE','SIGNET','USHERAGRO','NIPPOBATRY','RELCNX100','IBVENTURES','BHEL','NMDC','CENTUM','TCI','ONGC','ALICON','ICRA','ATLASCYCLE','SUDAR','AKZOINDIA','ONELIFECAP','KOTARISUG','RAINBOWPAP','MOLDTKPAC','ENGINERSIN','TRICOM','RELNIFTY','MANAKCOAT','SHRIRAMCIT','THERMAX','TECHIN','NAGREEKEXP','GMBREW','MPHASIS','DIAPOWER','GTL','WALCHANNAG','UMESLTD','UNICHEMLAB','EKC','KIRLOSIND','MICROSEC','MCLEODRUSS','MANAKINDST','MONTECARLO','BARTRONICS','FAGBEARING','ADVANTA','HINDUJAVEN','BANG','ALOKTEXT','STAN','NBCC','IPCALAB','UNITEDTEA','BALRAMCHIN','THOMASCOOK','WELENT','JAMNAAUTO','INDSWFTLAB','AGCNET','MARKSANS','HARRMALAYA','SUPREMEIND','GPPL','SURYAROSNI','RELIANCE','HIKAL','JAIHINDPRO','MAGMA','EMKAY','VISHNU','VARDMNPOLY','ITC','IDBI','CANBK','TATACHEM','PETRONET','ASHAPURMIN','ADSL','KEMROCK','JPPOWER','HAVELLS','ATLANTA','PARSVNATH','ADLABS','VIPIND','UNITY','CROMPGREAV','INDRAMEDCO','ARSHIYA','MARALOVER','RAYMOND','MANGLMCEM','ORBITCORP','KAVVERITEL','KESARENT','DELTACORP','DEEPAKNTR','AURIONPRO','ATUL','KIRLOSBROS','TCS','SMLISUZU','WSI','AVANTIFEED','CMC','BAJAJFINSV','CURATECH','SNOWMAN','NRBBEARING','NORBTEAEXP','BEDMUTHA','HFCL','STRTECH','RAMSARUP','GOLDSHARE','SUNTECK','CESC','BANKINDIA','MMTC','JKCEMENT','KERNEX','HCLTECH','INFY','TCIFINANCE','IBREALEST','GODREJCP','BHARATGEAR','WHEELS','KOHINOOR','BANARISUG','PRESTIGE','SURYAJYOTI','ARCHIDPLY','SASKEN','KGL','IGPL','TATAGLOBAL','ELECON','POCHIRAJU','DATAMATICS','PROZONINTU','BHAGYNAGAR','SRGINFOTEC','PFC','IOB','ANDHRSUGAR','DALMIASUG','BSELINFRA','3IINFOTECH','ADANIPOWER','GOACARBON','KARURVYSYA','EDUCOMP','POLYMED','LUMAXAUTO','ISMTLTD','MAX','NITINFIRE','EVERESTIND','CANFINHOME','ZEEL','COALINDIA','TORNTPOWER','VIJAYABANK','BLUEDART','ACROPETAL','SHREECEM','ESL','SINTEX','LML','ZODIACLOTH','INDIANHUME','HATHWAY','PRECWIRE','ITDCEM','RANEHOLDIN','FIEMIND','EXCELINDUS','BRITANNIA','SCI','ELGIEQUIP','ALPSINDUS','SANGHIIND','HDFC','MOTOGENFIN','RATNAMANI','SRHHYPOLTD','INFRATEL','XCHANGING','ZODJRDMKJ','EDL','SARLAPOLY','ORIENTREF','CONSOFINVT','ELECTCAST','RUCHISOYA','PRAKASH','HBSTOCK','AGRODUTCH','GULFOILLUB','PAGEIND','RICOAUTO','LAKSHVILAS','PRIMESECU','ASIANPAINT','CARBORUNIV','KOKUYOCMLN','GEOMETRIC','ADANIENT','VICEROY','NOCIL','CHENNPETRO','GICHSGFIN','ARROWTEX','BRIGADE','LIBERTSHOE','IBWSL','ORBTEXP','ALPHAGEO','SILINV','TAJGVK','BAJAJCORP','DCBBANK','TANLA','HSIL','JKTYRE','INGERRAND','ECEIND','SWELECTES','MBLINFRA','SJVN','WINDMACHIN','VENUSREM','BLISSGVS','ASIANTILES','UGARSUGAR','CCCL','PIONDIST','DHANUKA','RELAXO','SIYSIL','JINDALPOLY','ZENITHCOMP','SUTLEJTEX','GTNIND','INDOTHAI','COX&KINGS','PNBGILTS','ADANIPORTS','CANTABIL','HINDALCO','RKDL','TATACOFFEE','HELIOSMATH','SHAKTIPUMP','LCCINFOTEC','TTKPRESTIG','DBSTOCKBRO','SICAL','GEINDSYS','RCF','GMDCLTD','THIRUSUGAR','MRF','SBBJ','BVCL','MANGCHEFER','APARINDS','ORIENTBELL','GLENMARK','VIVIDHA','WEIZMANIND','MAYURUNIQ','GUFICBIO','SUNCLAYLTD','KIL','JSWHL','RTNINFRA','AMDIND','PUNJABCHEM','LAXMIMACH','ZANDUREALT','BEARDSELL','ARVINDREM','TDPOWERSYS','N100','RASOYPR','INDIAGLYCO','PNB','APCOTEXIND','DEEPIND','EASUNREYRL','IBULHSGFIN','CAMLINFINE','RAMANEWS','TRIDENT','UJAAS','TEXRAIL','SKMEGGPROD','KESORAMIND','SHREYANIND','ADVANIHOTR','SEPOWER','BOMDYEING','SANGAMIND','RENUKA','STOREONE','KAJARIACER','KAMATHOTEL','JINDWORLD','JETAIRWAYS','PRATIBHA','SMARTLINK','JBCHEPHARM','GOKEX','ZYDUSWELL','INDIANB','SHARDACROP','ANDHRACEMT','NILKAMAL','UBHOLDINGS','ADORWELD','M50','SUZLON','HERITGFOOD','GAL','REMSONSIND','MANGTIMBER','JPOLYINVST','GRUH','OMKARCHEM','DOLPHINOFF','ZYLOG','RALLIS','JAYSREETEA','LAKPRE','SANWARIA','KSK','LICHSGFIN','EUROCERA','OIL','MINDTREE','HINDDORROL','NATIONALUM','SHALPAINTS','HNGSNGBEES','TREEHOUSE','KALPATPOWR','WELSPUNIND','SHRIRAMEPC','SBIN','AJMERA','GOKUL','ASAHIINDIA','MHRIL','DONEAR','AMBUJACEM','PRAENG','CGCL','VGUARD','PIRPHYTO','SQSBFSI','PITTILAM','STAR','KOTAKBANK','EASTSILK','SHIRPUR-G','SERVALL','JSWENERGY','CNOVAPETRO','BHARTIARTL','ROSSELLIND','CUMMINSIND','STERTOOLS','THEJO','METALFORGE','GENESYS','CIMMCO','IL&FSTRANS','IMPEXFERRO','ELDERPHARM','VESUVIUS','VAKRANGEE','INDBANK','SUPREMEINF','MVL','ABB','CAIRN','ALKALI','FSL','NIITTECH','VIDEOIND','APOLLOHOSP','JUBILANT','SHASUNPHAR','A2ZINFRA','MENONBE','POLYPLEX','ARROWCOAT','JCTEL','HINDNATGLS','APOLLOTYRE','TALBROAUTO','SHIVTEX','REDINGTON','GVKPIL','RAJVIR','TIMBOR','KOTAKNIFTY','CHOLAFIN','BODALCHEM','TIMESGTY','NEPCMICON','WILLAMAGOR','GLAXO','MONNETISPA','SAKUMA','JKPAPER','GALLISPAT','RUPA','SOUTHBANK','DWARKESH','VIPULLTD','SAMTEL','ZENTEC','PVP','SATHAISPAT','FOSECOIND','KCPSUGIND','KSCL','YESBANK','M&M','SHIV-VANI','SHAHALLOYS','GRAPHITE','ESSELPACK','SHLAKSHMI','SALORAINTL','CEREBRAINT','KRBL','ORIENTALTL','SHOPERSTOP','SEINV','KAUSHALYA','KITEX','JPINFRATEC','EVERONN','ROHLTD','SURYALAXMI','UNIONBANK','RAMKY','DELTAMAGNT','RADICO','GSCLCEMENT','INVENTURE','PSB','DUNCANSLTD','STCINDIA','SHYAMTEL','INFINITE','IVC','RMMIL','ANDHRABANK','JUBLINDS','DLF','WOCKPHARMA','DISHMAN','GANESHHOUC','IDBIGOLD','NHPC','NCLIND','JENSONICOL','TECHM','PAPERPROD','ESCORTS','CCL','NCOPPER','GRANULES','ASHIMASYN','ANIKINDS','RAJESHEXPO','TNPETRO','MAITHANALL','PDSMFL','WENDT','SUBEX','DYNAMATECH','RELGRNIFTY','AHLEAST','NCC','MTEDUCARE','TV18BRDCST','AUTOLITIND','UTTAMVALUE','ICIL','SUNILHITEC','TRENT','MIC','JISLDVREQS','INDUSINDBK','CAPF','CMAHENDRA','GMRINFRA','NELCO','TATAMETALI','MUTHOOTFIN','MOHITIND','RML','SKSMICRO','PEL','SONATSOFTW','AROGRANITE','JAYAGROGN','REVATHI','PLETHICO','MARICO','RSSOFTWARE','DHUNINV','MPSLTD','ABIRLANUVO','CPSEETF','PBAINFRA','INDOCO','TGBHOTELS','AARTIIND','COREEDUTEC','MAGNUM','HINDMOTORS','DENORA','RELIGARE','ZICOM','JYOTISTRUC','MORARJEE','APOLSINHOT','DHARSUGAR','ALANKIT','GREENLAM','DCW','PGIL','SUMEETINDS','RSWM','SOLARINDS','GUJNRECOKE','BASF','MOIL','CENTEXT','OCL','HITECHPLAS','AEGISCHEM','AUSTRAL','CENTURYTEX','GNFC','NAUKRI','EMAMIINFRA','ENIL','VADILALIND','KICL','JINDALSAW','RAIN','SEZAL','EROSMEDIA','ALLCARGO','MANPASAND','REIAGROLTD','PILIND','BLKASHYAP','CONCOR','MONSANTO','FINPIPE','DICIND','VALUEIND','VASCONEQ','IVRCLINFRA','JINDRILL','IGARASHI','SUNDRMBRAK','TARMAT','PDPL','RUBYMILLS','JUBLFOOD','VENKEYS','SBT','HONDAPOWER','NFL','ORIENTABRA','MYSOREBANK','RELIGAREGO','PLASTIBLEN','GOLDIAM','ATFL','ARCHIES','AUTOAXLES','TITAN','SPMLINFRA','UNITECH','ANKITMETAL','NESCO','HARITASEAT','TBZ','SRTRANSFIN','AMTL','NITCO','HUBTOWN','L&TFH','POWERGRID','KKCL','PRAKASHSTL','HATSUN','SAGCEM','JBFIND','BBL','IOC','MANAPPURAM','GARDENSILK','MAHINDCIE','POLARIS','INTELLECT','TATAELXSI','GSS','TORNTPHARM','BALAMINES','KHAITANELE','SANDESH','NELCAST','3MINDIA','CHAMBLFERT','ASTRAL','KANORICHEM','MUKANDENGG','INDHOTEL','ICICIBANK','MARUTI','INNOIND','PONNIERODE','RESPONIND','CELEBRITY','KIRIINDUS','SPYL','NECLIFE','KALYANIFRG','UTTAMSUGAR','HINDOILEXP','JAICORPLTD','OISL','NTPC','HINDCOMPOS','BAFNAPHARM','UPERGANGES','IDEA','ORIENTBANK','GAMMNINFRA','HINDUNILVR','AVTNPL','GRAVITA','ESTER','MINDAIND','JOCIL','DHANBANK','EVEREADY','ASHOKLEY','COMPUSOFT','FINANTECH','TRF','ZUARIGLOB','BIRLAMONEY','ESSARSHPNG','TATAMTRDVR','CIPLA','BFINVEST','DBCORP','CEBBCO','TVSSRICHAK','RUSHIL','DABUR','MELSTAR','MCDOWELL-N','MOTHERSUMI','ZENITHEXPO','VISESHINFO','HGS','VARUNSHIP','PRECOT','LOTUSEYE','BROOKS','ASSAMCO','CASTEXTECH','CLUTCHAUTO','CORDSCABLE','LUMAXIND','KWALITY','WONDERLA','NESTLEIND','ORISSAMINE','INDOWIND','REPCOHOME']
=begin
File.open('/home/sradhu/Yahoo_finance_hist/log_yahoo_fin_hist_array.txt') do |f|
  f.lines.each do |line|
    script_list << line.map(&:to_s)
  end
end
=end

script_list.each do |symb|
	yah_fin_url = 'http://real-chart.finance.yahoo.com/table.csv?s=' + symb + ".NS"
	begin
		csv_file_name = '/home/sradhu/Yahoo_finance_hist/table.csv'
		File.open(csv_file_name, 'wb') do |fo|
	  	fo.print open(yah_fin_url).read 
		end
	rescue
		fil.puts "not downloaded for #{symb}"
		next
	end

	output_file_name = '/home/sradhu/MyProject/Source_code/shareanand/content/nse_hist_tbl_csv/'+ symb + '_hist_tbl.csv'
	FileUtils.mv(csv_file_name, output_file_name)
#fil.puts output_file_name
end
